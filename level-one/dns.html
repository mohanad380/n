<!DOCTYPE html>

<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>نظام أسماء النطاقات - عالم الشبكات</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&amp;display=swap" rel="stylesheet"/>
<link href="../css/style.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
</head>
<body>
<!-- القائمة الرئيسية -->
<header>
<div class="container header-container">
<a class="logo" href="../index.html">عالم الشبكات</a>
<button aria-label="Toggle navigation" class="menu-toggle">
<i class="fas fa-bars"></i>
</button>
<nav class="main-nav">
<ul>
<li><a href="../index.html">الرئيسية</a></li>
<li><a href="../basics.html">الأساسيات</a></li>
<li><a href="../level-one.html">المستوى الأول</a></li>
<li><a href="../level-two.html">المستوى الثاني</a></li>
<li><a href="../tests.html">الاختبارات</a></li>
</ul>
</nav>
<!-- New Dropdown Menu -->
<nav class="mobile-nav">
<ul>
<li><a href="../index.html">الرئيسية</a></li>
<li class="has-submenu">
<a href="#">الأساسيات <i class="fas fa-chevron-down dropdown-arrow"></i></a>
<ul class="submenu">
<li><a href="../basics/intro.html">مقدمة في الشبكات</a></li>
<li><a href="../basics/types.html">أنواع الشبكات</a></li>
<li><a href="../basics/topology.html">طوبولوجيا الشبكات</a></li>
<li><a href="../basics/protocols.html">بروتوكولات الشبكات</a></li>
<li><a href="../basics/devices.html">أجهزة الشبكات</a></li>
<li><a href="../basics/osi.html">نموذج OSI</a></li>
</ul>
</li>
<li class="has-submenu">
<a href="#">المستوى الأول <i class="fas fa-chevron-down dropdown-arrow"></i></a>
<ul class="submenu">
<li><a href="../level-one/ip-addressing.html">عنونة IP</a></li>
<li><a href="../level-one/routing.html">التوجيه</a></li>
<li><a href="../level-one/switching.html">التبديل</a></li>
<li><a href="../level-one/vlan.html">الشبكات الافتراضية VLAN</a></li>
<li><a href="../level-one/wireless.html">الشبكات اللاسلكية</a></li>
<li><a href="../level-one/security.html">أمن الشبكات</a></li>
<li><a href="../level-one/nat.html">ترجمة عناوين الشبكة NAT</a></li>
<li><a href="../level-one/dhcp.html">بروتوكول DHCP</a></li>
<li><a href="../level-one/dns.html">نظام أسماء النطاقات DNS</a></li>
<li><a href="../level-one/troubleshooting.html">استكشاف الأخطاء وإصلاحها</a></li>
<li><a href="../level-one/vpn.html">الشبكات الخاصة الافتراضية VPN</a></li>
<li><a href="../level-one/monitoring.html">مراقبة الشبكة</a></li>
</ul>
</li>
<li class="has-submenu">
<a href="#">المستوى الثاني <i class="fas fa-chevron-down dropdown-arrow"></i></a>
<ul class="submenu">
<li><a href="../level-two/mikrotik-intro.html">مقدمة في أجهزة مايكروتك</a></li>
<li><a href="../level-two/mikrotik-setup.html">إعداد أجهزة مايكروتك</a></li>
<li><a href="../level-two/mikrotik-config.html">تكوين أجهزة مايكروتك</a></li>
<li><a href="../level-two/mikrotik-routing.html">التوجيه في مايكروتك</a></li>
<li><a href="../level-two/mikrotik-wireless.html">إعدادات الشبكات اللاسلكية في مايكروتك</a></li>
<li><a href="../level-two/mikrotik-vpn.html">إعداد VPN في مايكروتك</a></li>
<li><a href="../level-two/enterprise-network-design.html">تصميم شبكات المؤسسات</a></li>
<li><a href="../level-two/cloud-networking.html">شبكات الحوسبة السحابية</a></li>
<li><a href="../level-two/advanced-network-security.html">أمن الشبكات المتقدم</a></li>
<li><a href="../level-two/iot-networking.html">شبكات إنترنت الأشياء</a></li>
</ul>
</li>
<li class="has-submenu">
<a href="#">الاختبارات <i class="fas fa-chevron-down dropdown-arrow"></i></a>
<ul class="submenu">
<li><a href="../tests/basics-test.html">اختبار الأساسيات</a></li>
<li><a href="../tests/level-one-test.html">اختبار المستوى الأول</a></li>
<li><a href="../tests/level-two-test.html">اختبار المستوى الثاني</a></li>
<li><a href="../tests/comprehensive-test.html">الاختبار الشامل</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</header>
<!-- محتوى الدرس -->
<div class="container content-container">
<aside class="sidebar">
<h3 class="sidebar-title">دروس المستوى الأول</h3>
<nav class="sidebar-nav">
<ul>
<li><a href="ip-addressing.html">عنونة IP وتقسيم الشبكات</a></li>
<li><a href="routing.html">أساسيات التوجيه</a></li>
<li><a href="switching.html">أساسيات التبديل</a></li>
<li><a href="vlan.html">الشبكات المحلية الافتراضية</a></li>
<li><a href="wireless.html">الشبكات اللاسلكية</a></li>
<li><a href="security.html">أساسيات أمان الشبكات</a></li>
<li><a href="nat.html">ترجمة عناوين الشبكة</a></li>
<li><a href="dhcp.html">بروتوكول DHCP</a></li>
<li><a class="active" href="dns.html">نظام أسماء النطاقات</a></li>
<li><a href="troubleshooting.html">استكشاف الأخطاء وإصلاحها</a></li>
<li><a href="vpn.html">الشبكات الخاصة الافتراضية</a></li>
<li><a href="monitoring.html">مراقبة الشبكات وإدارتها</a></li>
</ul>
</nav>
</aside>
<main class="main-content">
<h1 class="lesson-title">نظام أسماء النطاقات (DNS)</h1>
<div class="lesson-content">
<h2>مقدمة في نظام أسماء النطاقات</h2>
<p>نظام أسماء النطاقات (Domain Name System - DNS) هو نظام تسمية هرمي موزع لأجهزة الكمبيوتر والخدمات والموارد الأخرى المتصلة بالإنترنت أو شبكة خاصة. يترجم DNS أسماء النطاقات المألوفة للإنسان (مثل www.example.com) إلى عناوين IP الرقمية (مثل 192.0.2.1) التي تحتاجها أجهزة الكمبيوتر للاتصال ببعضها البعض.</p>
<p>قبل إنشاء DNS في عام 1983، كان يجب على المستخدمين تذكر عناوين IP الرقمية للوصول إلى المواقع والخدمات على الإنترنت، وهو أمر صعب وغير عملي. مع نمو الإنترنت، أصبح DNS أحد الأنظمة الأساسية التي تمكن الإنترنت من العمل بسلاسة كما نعرفه اليوم.</p>
<img alt="مفهوم نظام أسماء النطاقات" src="../images/dns_concept_replacement.png"/>
<h2>كيف يعمل نظام أسماء النطاقات؟</h2>
<p>يعمل DNS كدليل هاتف للإنترنت، حيث يترجم أسماء النطاقات إلى عناوين IP. عندما تدخل اسم نطاق في متصفح الويب، تحدث سلسلة من الاستعلامات والاستجابات بين العميل وخوادم DNS المختلفة لترجمة اسم النطاق إلى عنوان IP.</p>
<h3>عملية استعلام DNS</h3>
<p>عندما تدخل اسم نطاق (مثل www.example.com) في متصفح الويب، تحدث العملية التالية:</p>
<ol>
<li><strong>استعلام العميل:</strong> يرسل متصفح الويب استعلامًا إلى محلل DNS المحلي (عادة ما يكون على نظام التشغيل أو مزود خدمة الإنترنت).</li>
<li><strong>ذاكرة التخزين المؤقت المحلية:</strong> يتحقق المحلل المحلي أولاً من ذاكرة التخزين المؤقت المحلية لمعرفة ما إذا كان قد ترجم هذا النطاق مؤخرًا. إذا وجد الترجمة في ذاكرة التخزين المؤقت، فسيعيد عنوان IP مباشرة دون الحاجة إلى استعلامات إضافية.</li>
<li><strong>خادم الجذر:</strong> إذا لم يكن لدى المحلل المحلي الترجمة في ذاكرة التخزين المؤقت، فسيبدأ سلسلة من الاستعلامات بدءًا من خوادم الجذر. خوادم الجذر هي جزء أساسي من بنية DNS وتعرف مواقع خوادم TLD (Top-Level Domain).</li>
<li><strong>خادم TLD:</strong> يوجه خادم الجذر المحلل إلى خادم TLD المناسب بناءً على امتداد النطاق (.com، .org، .net، إلخ). يعرف خادم TLD مواقع خوادم الاسم المسؤولة عن نطاقات محددة.</li>
<li><strong>خادم الاسم المخول:</strong> يوجه خادم TLD المحلل إلى خادم الاسم المخول للنطاق المحدد (example.com). خادم الاسم المخول يحتفظ بسجلات DNS للنطاق ويمكنه الإجابة على الاستعلام.</li>
<li><strong>استجابة DNS:</strong> يقدم خادم الاسم المخول عنوان IP المقابل لاسم النطاق إلى المحلل المحلي.</li>
<li><strong>ذاكرة التخزين المؤقت والاستجابة:</strong> يخزن المحلل المحلي الترجمة في ذاكرة التخزين المؤقت لاستخدامها في المستقبل ويعيد عنوان IP إلى متصفح الويب.</li>
<li><strong>اتصال الويب:</strong> يستخدم متصفح الويب عنوان IP للاتصال بخادم الويب واسترداد الصفحة المطلوبة.</li>
</ol>
<p>تحدث هذه العملية بسرعة كبيرة، عادة في أقل من ثانية، مما يوفر تجربة سلسة للمستخدم.</p>
<h2>مكونات نظام أسماء النطاقات</h2>
<p>يتكون نظام DNS من عدة مكونات رئيسية تعمل معًا لتوفير خدمة ترجمة أسماء النطاقات:</p>
<h3>1. فضاء اسم النطاق (Domain Name Space)</h3>
<p>فضاء اسم النطاق هو بنية هرمية تشبه الشجرة تنظم جميع أسماء النطاقات. في قمة الهرم توجد "الجذر"، ممثلة بنقطة (.). تحت الجذر توجد نطاقات المستوى الأعلى (TLDs) مثل .com و .org و .net، وكذلك رموز الدول مثل .us و .uk و .jp. تحت TLDs توجد نطاقات المستوى الثاني (مثل example.com) والنطاقات الفرعية (مثل www.example.com).</p>
<h3>2. خوادم الاسم (Name Servers)</h3>
<p>خوادم الاسم هي خوادم تخزن معلومات DNS وتستجيب لاستعلامات DNS. هناك عدة أنواع من خوادم الاسم:</p>
<ul>
<li><strong>خوادم الجذر:</strong> هناك 13 مجموعة من خوادم الجذر (مسماة من A إلى M) موزعة حول العالم. تعرف هذه الخوادم مواقع خوادم TLD.</li>
<li><strong>خوادم TLD:</strong> تدير هذه الخوادم معلومات DNS لنطاقات المستوى الأعلى مثل .com و .org.</li>
<li><strong>خوادم الاسم المخولة:</strong> تدير هذه الخوادم معلومات DNS لنطاقات محددة. على سبيل المثال، خادم الاسم المخول لـ example.com يعرف عناوين IP لجميع الخوادم في هذا النطاق.</li>
<li><strong>محللات DNS:</strong> تتلقى هذه الخوادم استعلامات DNS من العملاء وتتفاعل مع خوادم الاسم الأخرى للحصول على الإجابات. عادة ما توفر مزودات خدمة الإنترنت (ISPs) محللات DNS لعملائها.</li>
</ul>
<h3>3. سجلات الموارد (Resource Records)</h3>
<p>سجلات الموارد هي البيانات الأساسية المخزنة في خوادم الاسم. كل سجل مورد يحتوي على معلومات حول مورد معين. هناك عدة أنواع من سجلات الموارد، بما في ذلك:</p>
<ul>
<li><strong>سجل A (Address):</strong> يربط اسم نطاق بعنوان IPv4.</li>
<li><strong>سجل AAAA (IPv6 Address):</strong> يربط اسم نطاق بعنوان IPv6.</li>
<li><strong>سجل CNAME (Canonical Name):</strong> ينشئ اسمًا مستعارًا لاسم نطاق آخر.</li>
<li><strong>سجل MX (Mail Exchange):</strong> يحدد خوادم البريد الإلكتروني للنطاق.</li>
<li><strong>سجل NS (Name Server):</strong> يحدد خوادم الاسم المخولة للنطاق.</li>
<li><strong>سجل PTR (Pointer):</strong> يربط عنوان IP باسم نطاق (البحث العكسي).</li>
<li><strong>سجل SOA (Start of Authority):</strong> يحتوي على معلومات إدارية حول النطاق.</li>
<li><strong>سجل TXT (Text):</strong> يخزن نصًا نصيًا، غالبًا ما يستخدم للتحقق من ملكية النطاق أو لسياسات البريد الإلكتروني.</li>
</ul>
<h3>4. محللات DNS (DNS Resolvers)</h3>
<p>محللات DNS هي برامج تتلقى استعلامات DNS من التطبيقات (مثل متصفحات الويب) وتتفاعل مع خوادم الاسم للحصول على الإجابات. يمكن أن تكون محللات DNS جزءًا من نظام التشغيل أو خدمة مقدمة من مزود خدمة الإنترنت أو خدمة DNS عامة مثل Google Public DNS (8.8.8.8) أو Cloudflare DNS (1.1.1.1).</p>
<h2>أنواع استعلامات DNS</h2>
<p>هناك ثلاثة أنواع رئيسية من استعلامات DNS:</p>
<h3>1. الاستعلام المتكرر (Recursive Query)</h3>
<p>في الاستعلام المتكرر، يطلب العميل من محلل DNS الحصول على إجابة كاملة. إذا لم يكن لدى المحلل الإجابة في ذاكرة التخزين المؤقت، فسيقوم بإجراء استعلامات متتالية إلى خوادم الاسم المختلفة حتى يحصل على الإجابة النهائية. ثم يعيد المحلل الإجابة إلى العميل.</p>
<h3>2. الاستعلام التكراري (Iterative Query)</h3>
<p>في الاستعلام التكراري، يطلب المحلل من خادم الاسم أفضل إجابة يمكنه تقديمها. إذا كان خادم الاسم لا يعرف الإجابة النهائية، فسيوجه المحلل إلى خادم اسم آخر أقرب إلى الإجابة. ثم يقوم المحلل بإجراء استعلام جديد إلى خادم الاسم الموصى به. يستمر هذا حتى يصل المحلل إلى خادم الاسم الذي يمكنه تقديم الإجابة النهائية.</p>
<h3>3. الاستعلام غير المتكرر (Non-Recursive Query)</h3>
<p>في الاستعلام غير المتكرر، يطلب العميل من محلل DNS إجابة يعرفها المحلل بالفعل. قد تكون الإجابة في ذاكرة التخزين المؤقت للمحلل أو قد يكون المحلل هو خادم الاسم المخول للنطاق المطلوب.</p>
<h2>أنواع سجلات DNS</h2>
<p>تخزن خوادم الاسم معلومات DNS في شكل سجلات موارد. هناك عدة أنواع من سجلات الموارد، كل منها يخدم غرضًا محددًا:</p>
<h3>1. سجل A (Address)</h3>
<p>سجل A هو النوع الأكثر شيوعًا من سجلات DNS. يربط اسم نطاق بعنوان IPv4. على سبيل المثال:</p>
<pre>example.com.    IN    A    192.0.2.1</pre>
<p>هذا السجل يخبر DNS أن النطاق "example.com" يشير إلى عنوان IP "192.0.2.1".</p>
<h3>2. سجل AAAA (IPv6 Address)</h3>
<p>سجل AAAA مشابه لسجل A، ولكنه يربط اسم نطاق بعنوان IPv6. على سبيل المثال:</p>
<pre>example.com.    IN    AAAA    2001:0db8:85a3:0000:0000:8a2e:0370:7334</pre>
<p>هذا السجل يخبر DNS أن النطاق "example.com" يشير إلى عنوان IPv6 "2001:0db8:85a3:0000:0000:8a2e:0370:7334".</p>
<h3>3. سجل CNAME (Canonical Name)</h3>
<p>سجل CNAME ينشئ اسمًا مستعارًا لاسم نطاق آخر. يمكن استخدامه لإنشاء نطاقات فرعية متعددة تشير إلى نفس عنوان IP دون الحاجة إلى تكرار سجلات A. على سبيل المثال:</p>
<pre>www.example.com.    IN    CNAME    example.com.</pre>
<p>هذا السجل يخبر DNS أن "www.example.com" هو اسم مستعار لـ "example.com". عندما يحاول شخص ما الوصول إلى "www.example.com"، سيبحث DNS عن سجل A لـ "example.com" ويستخدم عنوان IP المقابل.</p>
<h3>4. سجل MX (Mail Exchange)</h3>
<p>سجل MX يحدد خوادم البريد الإلكتروني المسؤولة عن قبول رسائل البريد الإلكتروني نيابة عن النطاق. يتضمن سجل MX أيضًا قيمة أولوية تحدد ترتيب خوادم البريد الإلكتروني. على سبيل المثال:</p>
<pre>example.com.    IN    MX    10    mail1.example.com.
example.com.    IN    MX    20    mail2.example.com.</pre>
<p>هذه السجلات تخبر DNS أن البريد الإلكتروني لـ "example.com" يجب توجيهه أولاً إلى "mail1.example.com" (الأولوية 10). إذا كان هذا الخادم غير متاح، فيجب توجيه البريد الإلكتروني إلى "mail2.example.com" (الأولوية 20).</p>
<h3>5. سجل NS (Name Server)</h3>
<p>سجل NS يحدد خوادم الاسم المخولة للنطاق. هذه هي الخوادم التي تحتفظ بسجلات DNS للنطاق. على سبيل المثال:</p>
<pre>example.com.    IN    NS    ns1.example.com.
example.com.    IN    NS    ns2.example.com.</pre>
<p>هذه السجلات تخبر DNS أن "ns1.example.com" و "ns2.example.com" هما خوادم الاسم المخولة لـ "example.com".</p>
<h3>6. سجل PTR (Pointer)</h3>
<p>سجل PTR يستخدم للبحث العكسي، حيث يربط عنوان IP باسم نطاق. يتم تخزين سجلات PTR في نطاق خاص يسمى "in-addr.arpa" لعناوين IPv4 و "ip6.arpa" لعناوين IPv6. على سبيل المثال:</p>
<pre>1.2.0.192.in-addr.arpa.    IN    PTR    example.com.</pre>
<p>هذا السجل يخبر DNS أن عنوان IP "192.0.2.1" يشير إلى النطاق "example.com".</p>
<h3>7. سجل SOA (Start of Authority)</h3>
<p>سجل SOA يحتوي على معلومات إدارية حول النطاق، بما في ذلك خادم الاسم الرئيسي، وعنوان البريد الإلكتروني للمسؤول، والأرقام التسلسلية، وإعدادات التوقيت المختلفة. على سبيل المثال:</p>
<pre>example.com.    IN    SOA    ns1.example.com. admin.example.com. (
                              2023042601 ; الرقم التسلسلي
                              3600       ; وقت التحديث (1 ساعة)
                              1800       ; وقت إعادة المحاولة (30 دقيقة)
                              604800     ; وقت انتهاء الصلاحية (1 أسبوع)
                              86400 )    ; الحد الأدنى لـ TTL (1 يوم)</pre>
<p>هذا السجل يحتوي على معلومات مهمة لخوادم الاسم حول كيفية التعامل مع النطاق.</p>
<h3>8. سجل TXT (Text)</h3>
<p>سجل TXT يخزن نصًا نصيًا مرتبطًا بالنطاق. يستخدم غالبًا للتحقق من ملكية النطاق أو لتنفيذ سياسات البريد الإلكتروني مثل SPF و DKIM و DMARC. على سبيل المثال:</p>
<pre>example.com.    IN    TXT    "v=spf1 include:_spf.example.com ~all"</pre>
<p>هذا السجل يحدد سياسة SPF (Sender Policy Framework) للنطاق، والتي تحدد الخوادم المصرح لها بإرسال بريد إلكتروني نيابة عن النطاق.</p>
<h3>9. سجل SRV (Service)</h3>
<p>سجل SRV يحدد موقع الخوادم لخدمات محددة. يستخدم غالبًا لخدمات مثل SIP و XMPP و LDAP. على سبيل المثال:</p>
<pre>_sip._tcp.example.com.    IN    SRV    10 60 5060 sip.example.com.</pre>
<p>هذا السجل يخبر DNS أن خدمة SIP على TCP للنطاق "example.com" متاحة على الخادم "sip.example.com" على المنفذ 5060، مع الأولوية 10 والوزن 60.</p>
<h3>10. سجل CAA (Certification Authority Authorization)</h3>
<p>سجل CAA يحدد سلطات الشهادات (CAs) المصرح لها بإصدار شهادات SSL/TLS للنطاق. على سبيل المثال:</p>
<pre>example.com.    IN    CAA    0 issue "letsencrypt.org"</pre>
<p>هذا السجل يخبر DNS أن "letsencrypt.org" هي سلطة الشهادات الوحيدة المصرح لها بإصدار شهادات لـ "example.com".</p>
<h2>ذاكرة التخزين المؤقت DNS (DNS Caching)</h2>
<p>ذاكرة التخزين المؤقت DNS هي عملية تخزين نتائج استعلامات DNS لفترة من الوقت. تساعد ذاكرة التخزين المؤقت في تحسين أداء DNS وتقليل حركة المرور على الشبكة عن طريق تجنب الحاجة إلى تكرار نفس الاستعلامات.</p>
<h3>كيف تعمل ذاكرة التخزين المؤقت DNS</h3>
<p>عندما يتلقى محلل DNS استجابة لاستعلام، فإنه يخزن الاستجابة في ذاكرة التخزين المؤقت المحلية. يتضمن كل سجل DNS قيمة "Time to Live" (TTL)، والتي تحدد المدة التي يمكن خلالها تخزين السجل في ذاكرة التخزين المؤقت قبل أن يصبح قديمًا ويحتاج إلى تحديث.</p>
<p>عندما يتلقى المحلل استعلامًا لاسم نطاق، فإنه يتحقق أولاً من ذاكرة التخزين المؤقت المحلية. إذا وجد سجلًا صالحًا (لم تنته صلاحية TTL)، فسيعيد الاستجابة المخزنة مؤقتًا دون الحاجة إلى إجراء استعلامات إضافية. هذا يوفر الوقت ويقلل من حركة المرور على الشبكة.</p>
<h3>مستويات ذاكرة التخزين المؤقت DNS</h3>
<p>يمكن أن تحدث ذاكرة التخزين المؤقت DNS على عدة مستويات:</p>
<ul>
<li><strong>ذاكرة التخزين المؤقت للمتصفح:</strong> تحتفظ متصفحات الويب بذاكرة تخزين مؤقت DNS خاصة بها لتجنب الحاجة إلى إجراء استعلامات DNS متكررة.</li>
<li><strong>ذاكرة التخزين المؤقت لنظام التشغيل:</strong> تحتفظ أنظمة التشغيل بذاكرة تخزين مؤقت DNS على مستوى النظام، والتي يمكن أن تستخدمها جميع التطبيقات على الجهاز.</li>
<li><strong>ذاكرة التخزين المؤقت للمحلل:</strong> تحتفظ محللات DNS (مثل تلك التي يوفرها مزودو خدمة الإنترنت) بذاكرة تخزين مؤقت للاستجابات، والتي يمكن أن تستفيد منها جميع عملائها.</li>
<li><strong>ذاكرة التخزين المؤقت لخادم الاسم:</strong> تحتفظ خوادم الاسم بذاكرة تخزين مؤقت للاستجابات من خوادم الاسم الأخرى، مما يقلل من الحاجة إلى استعلامات متكررة.</li>
</ul>
<h3>تأثير TTL على ذاكرة التخزين المؤقت DNS</h3>
<p>قيمة TTL هي عامل مهم في ذاكرة التخزين المؤقت DNS. قيمة TTL المنخفضة تعني أن السجلات ستنتهي صلاحيتها بسرعة، مما يؤدي إلى استعلامات DNS أكثر تكرارًا ولكن تغييرات DNS أسرع انتشارًا. قيمة TTL العالية تعني أن السجلات ستظل في ذاكرة التخزين المؤقت لفترة أطول، مما يقلل من استعلامات DNS ولكن يؤخر انتشار تغييرات DNS.</p>
<p>عند التخطيط لتغييرات DNS (مثل تغيير مضيف الويب)، من الممارسات الجيدة تقليل قيم TTL قبل التغيير لتسريع انتشار التغييرات، ثم زيادة قيم TTL بعد اكتمال التغيير لتحسين الأداء.</p>
<h2>DNS المتكرر والتكراري</h2>
<p>هناك نوعان رئيسيان من خوادم DNS: المتكررة والتكرارية. يختلف هذان النوعان في كيفية معالجتهما لاستعلامات DNS.</p>
<h3>خادم DNS المتكرر (Recursive DNS Server)</h3>
<p>خادم DNS المتكرر (المعروف أيضًا باسم محلل DNS) يتلقى استعلامات DNS من العملاء ويتحمل مسؤولية العثور على الإجابة النهائية. إذا لم يكن لدى الخادم المتكرر الإجابة في ذاكرة التخزين المؤقت، فسيقوم بإجراء سلسلة من الاستعلامات إلى خوادم DNS الأخرى، بدءًا من خوادم الجذر وصولاً إلى خادم الاسم المخول للنطاق المطلوب.</p>
<p>يوفر مزودو خدمة الإنترنت عادة خوادم DNS متكررة لعملائهم. هناك أيضًا خدمات DNS متكررة عامة مثل Google Public DNS (8.8.8.8) و Cloudflare DNS (1.1.1.1).</p>
<h3>خادم DNS التكراري (Iterative DNS Server)</h3>
<p>خادم DNS التكراري (المعروف أيضًا باسم خادم الاسم المخول) يستجيب فقط للاستعلامات المتعلقة بالنطاقات التي يديرها. إذا تلقى استعلامًا لنطاق آخر، فسيوجه المستعلم إلى خادم DNS آخر أقرب إلى الإجابة.</p>
<p>خوادم الجذر وخوادم TLD وخوادم الاسم المخولة هي أمثلة على خوادم DNS التكرارية.</p>
<h2>DNS الآمن (DNSSEC)</h2>
<p>DNS الآمن (DNSSEC) هو مجموعة من امتدادات DNS التي توفر مصادقة أصل بيانات DNS والتحقق من سلامة البيانات. تم تصميم DNSSEC لحماية عملاء DNS من هجمات معينة، مثل هجمات التسميم (poisoning) حيث يحاول المهاجم خداع خادم DNS لتقديم معلومات خاطئة.</p>
<h3>كيف يعمل DNSSEC</h3>
<p>يعمل DNSSEC عن طريق إضافة توقيعات رقمية إلى سجلات DNS. تسمح هذه التوقيعات لمحللات DNS بالتحقق من أن البيانات التي تلقوها تأتي من المصدر الصحيح (مصادقة المصدر) ولم يتم تعديلها أثناء النقل (سلامة البيانات).</p>
<p>يستخدم DNSSEC سلسلة من الثقة تبدأ من منطقة الجذر وتمتد إلى النطاقات الفرعية. كل منطقة في سلسلة الثقة توقع على المفاتيح العامة للمناطق التي تقع مباشرة تحتها، مما ينشئ سلسلة من الثقة من الجذر إلى النطاق النهائي.</p>
<h3>سجلات DNSSEC</h3>
<p>يستخدم DNSSEC عدة أنواع من سجلات DNS:</p>
<ul>
<li><strong>DNSKEY:</strong> يحتوي على المفتاح العام المستخدم للتحقق من توقيعات RRSIG.</li>
<li><strong>RRSIG (Resource Record Signature):</strong> يحتوي على التوقيع الرقمي لمجموعة سجلات DNS.</li>
<li><strong>DS (Delegation Signer):</strong> يحتوي على هاش لمفتاح DNSKEY في منطقة فرعية، مما يسمح ببناء سلسلة الثقة.</li>
<li><strong>NSEC/NSEC3:</strong> يستخدم لإثبات عدم وجود سجل (إنكار الوجود المصادق).</li>
</ul>
<h3>فوائد DNSSEC</h3>
<p>يوفر DNSSEC عدة فوائد:</p>
<ul>
<li><strong>مصادقة المصدر:</strong> يضمن أن بيانات DNS تأتي من المصدر الصحيح.</li>
<li><strong>سلامة البيانات:</strong> يضمن أن بيانات DNS لم يتم تعديلها أثناء النقل.</li>
<li><strong>إنكار الوجود المصادق:</strong> يوفر طريقة آمنة لإثبات أن سجل DNS غير موجود.</li>
<li><strong>الحماية من هجمات التسميم:</strong> يجعل من الصعب على المهاجمين خداع محللات DNS لتقديم معلومات خاطئة.</li>
</ul>
<h3>تحديات DNSSEC</h3>
<p>على الرغم من فوائده، يواجه DNSSEC بعض التحديات:</p>
<ul>
<li><strong>التعقيد:</strong> DNSSEC أكثر تعقيدًا من DNS التقليدي، مما يجعل تنفيذه وإدارته أكثر صعوبة.</li>
<li><strong>الحجم المتزايد للاستجابات:</strong> تضيف سجلات DNSSEC حجمًا كبيرًا إلى استجابات DNS، مما قد يؤدي إلى مشاكل في الأداء.</li>
<li><strong>إدارة المفاتيح:</strong> يتطلب DNSSEC إدارة دقيقة للمفاتيح، بما في ذلك تناوب المفاتيح الدوري.</li>
<li><strong>التبني البطيء:</strong> على الرغم من أهميته، لا يزال تبني DNSSEC بطيئًا، خاصة على مستوى النطاقات الفردية.</li>
</ul>
<h2>DNS عبر HTTPS (DoH) و DNS عبر TLS (DoT)</h2>
<p>تقليديًا، يتم إرسال استعلامات DNS كنص عادي، مما يجعلها عرضة للتنصت والتلاعب. لمعالجة هذه المشكلة، تم تطوير بروتوكولين جديدين: DNS عبر HTTPS (DoH) و DNS عبر TLS (DoT).</p>
<h3>DNS عبر HTTPS (DoH)</h3>
<p>DNS عبر HTTPS (DoH) هو بروتوكول يرسل استعلامات واستجابات DNS عبر بروتوكول HTTPS المشفر. يوفر DoH خصوصية وأمانًا محسنين عن طريق منع التنصت والتلاعب باستعلامات DNS.</p>
<p>في DoH، يتم تشفير استعلامات DNS وإرسالها كطلبات HTTPS إلى خادم DoH. يقوم الخادم بمعالجة الاستعلام وإعادة الاستجابة كاستجابة HTTPS مشفرة.</p>
<p>تدعم العديد من المتصفحات الحديثة (مثل Firefox و Chrome) DoH، ويمكن للمستخدمين تكوينها لاستخدام خدمات DoH مثل Cloudflare (https://cloudflare-dns.com/dns-query) أو Google (https://dns.google/dns-query).</p>
<h3>DNS عبر TLS (DoT)</h3>
<p>DNS عبر TLS (DoT) هو بروتوكول مشابه يرسل استعلامات واستجابات DNS عبر اتصال TLS مشفر. مثل DoH، يوفر DoT خصوصية وأمانًا محسنين.</p>
<p>في DoT، يتم إنشاء اتصال TLS مشفر بين العميل وخادم DoT على المنفذ 853. يتم إرسال استعلامات واستجابات DNS عبر هذا الاتصال المشفر.</p>
<p>تدعم العديد من أنظمة التشغيل الحديثة (مثل Android 9+) DoT، ويمكن للمستخدمين تكوينها لاستخدام خدمات DoT مثل Cloudflare (tls://1.1.1.1) أو Google (tls://8.8.8.8).</p>
<h3>مقارنة بين DoH و DoT</h3>
<p>كل من DoH و DoT يوفر خصوصية وأمانًا محسنين لاستعلامات DNS، ولكن هناك بعض الاختلافات الرئيسية:</p>
<ul>
<li><strong>البروتوكول الأساسي:</strong> يستخدم DoH بروتوكول HTTPS، بينما يستخدم DoT بروتوكول TLS.</li>
<li><strong>المنفذ:</strong> يستخدم DoH عادة المنفذ 443 (نفس منفذ HTTPS)، بينما يستخدم DoT المنفذ 853.</li>
<li><strong>إخفاء الحركة:</strong> يمكن لـ DoH إخفاء حركة DNS داخل حركة HTTPS العادية، مما يجعل من الصعب على مراقبي الشبكة تمييزها. DoT، من ناحية أخرى، يستخدم منفذًا مخصصًا، مما يجعل من السهل تحديد حركة DNS.</li>
<li><strong>التكامل مع المتصفح:</strong> DoH مدمج بشكل أفضل مع متصفحات الويب، بينما DoT مدمج بشكل أفضل على مستوى نظام التشغيل.</li>
</ul>
<h2>تكوين خادم DNS</h2>
<p>يختلف تكوين خادم DNS اعتمادًا على البرنامج المستخدم. فيما يلي أمثلة على كيفية تكوين خوادم DNS شائعة:</p>
<h3>BIND (Berkeley Internet Name Domain)</h3>
<p>BIND هو أحد أكثر برامج خادم DNS استخدامًا. لتكوين خادم BIND أساسي، اتبع الخطوات التالية:</p>
<ol>
<li>قم بتثبيت BIND:
                        <pre>sudo apt-get install bind9   # على Ubuntu/Debian
sudo yum install bind       # على CentOS/RHEL</pre>
</li>
<li>قم بتكوين الملف الرئيسي (/etc/bind/named.conf):
                        <pre>
options {
    directory "/var/cache/bind";
    recursion yes;
    allow-recursion { 192.168.1.0/24; };
    listen-on { 192.168.1.10; };
    forwarders {
        8.8.8.8;
        8.8.4.4;
    };
};

zone "example.com" {
    type master;
    file "/etc/bind/zones/example.com.zone";
};

zone "1.168.192.in-addr.arpa" {
    type master;
    file "/etc/bind/zones/192.168.1.zone";
};
                        </pre>
</li>
<li>قم بإنشاء ملف منطقة للنطاق الأمامي (/etc/bind/zones/example.com.zone):
                        <pre>
$TTL 86400
@       IN      SOA     ns1.example.com. admin.example.com. (
                        2023042601 ; الرقم التسلسلي
                        3600       ; وقت التحديث (1 ساعة)
                        1800       ; وقت إعادة المحاولة (30 دقيقة)
                        604800     ; وقت انتهاء الصلاحية (1 أسبوع)
                        86400 )    ; الحد الأدنى لـ TTL (1 يوم)

@       IN      NS      ns1.example.com.
@       IN      A       192.168.1.10
ns1     IN      A       192.168.1.10
www     IN      A       192.168.1.20
mail    IN      A       192.168.1.30
@       IN      MX      10 mail.example.com.
                        </pre>
</li>
<li>قم بإنشاء ملف منطقة للبحث العكسي (/etc/bind/zones/192.168.1.zone):
                        <pre>
$TTL 86400
@       IN      SOA     ns1.example.com. admin.example.com. (
                        2023042601 ; الرقم التسلسلي
                        3600       ; وقت التحديث (1 ساعة)
                        1800       ; وقت إعادة المحاولة (30 دقيقة)
                        604800     ; وقت انتهاء الصلاحية (1 أسبوع)
                        86400 )    ; الحد الأدنى لـ TTL (1 يوم)

@       IN      NS      ns1.example.com.
10      IN      PTR     ns1.example.com.
20      IN      PTR     www.example.com.
30      IN      PTR     mail.example.com.
                        </pre>
</li>
<li>أعد تشغيل خدمة BIND:
                        <pre>sudo systemctl restart bind9</pre>
</li>
</ol>
<h3>Microsoft DNS Server</h3>
<p>Microsoft DNS Server هو جزء من Windows Server. لتكوين Microsoft DNS Server أساسي، اتبع الخطوات التالية:</p>
<ol>
<li>افتح "Server Manager" (مدير الخادم).</li>
<li>انقر على "Add roles and features" (إضافة أدوار وميزات).</li>
<li>اتبع المعالج وحدد "DNS Server" (خادم DNS) كدور لتثبيته.</li>
<li>بعد التثبيت، افتح "DNS Manager" (مدير DNS).</li>
<li>انقر بزر الماوس الأيمن على اسم الخادم واختر "Configure a DNS Server" (تكوين خادم DNS).</li>
<li>اتبع المعالج لتكوين الخادم كخادم DNS أساسي.</li>
<li>لإنشاء منطقة جديدة، انقر بزر الماوس الأيمن على "Forward Lookup Zones" (مناطق البحث الأمامي) واختر "New Zone" (منطقة جديدة).</li>
<li>اتبع معالج "New Zone" لإنشاء منطقة جديدة وتحديد سجلات DNS.</li>
</ol>
<h3>Unbound</h3>
<p>Unbound هو محلل DNS خفيف الوزن وعالي الأداء. لتكوين Unbound أساسي، اتبع الخطوات التالية:</p>
<ol>
<li>قم بتثبيت Unbound:
                        <pre>sudo apt-get install unbound   # على Ubuntu/Debian
sudo yum install unbound       # على CentOS/RHEL</pre>
</li>
<li>قم بتكوين الملف الرئيسي (/etc/unbound/unbound.conf):
                        <pre>
server:
    verbosity: 1
    interface: 0.0.0.0
    port: 53
    do-ip4: yes
    do-ip6: yes
    do-udp: yes
    do-tcp: yes
    access-control: 192.168.1.0/24 allow
    root-hints: "/var/lib/unbound/root.hints"
    hide-identity: yes
    hide-version: yes
    harden-glue: yes
    harden-dnssec-stripped: yes
    use-caps-for-id: yes
    cache-min-ttl: 3600
    cache-max-ttl: 86400
    prefetch: yes
    num-threads: 4
    msg-cache-slabs: 8
    rrset-cache-slabs: 8
    infra-cache-slabs: 8
    key-cache-slabs: 8
    rrset-cache-size: 256m
    msg-cache-size: 128m
    so-rcvbuf: 8m
    unwanted-reply-threshold: 10000
    do-not-query-localhost: no
    val-clean-additional: yes
    
forward-zone:
    name: "."
    forward-addr: 8.8.8.8
    forward-addr: 8.8.4.4
                        </pre>
</li>
<li>قم بتنزيل ملف root.hints:
                        <pre>sudo wget -O /var/lib/unbound/root.hints https://www.internic.net/domain/named.cache</pre>
</li>
<li>أعد تشغيل خدمة Unbound:
                        <pre>sudo systemctl restart unbound</pre>
</li>
</ol>
<h2>استكشاف أخطاء DNS وإصلاحها</h2>
<p>قد تواجه مشاكل مع DNS في بعض الأحيان. فيما يلي بعض المشاكل الشائعة وكيفية استكشافها وإصلاحها:</p>
<h3>1. عدم القدرة على حل أسماء النطاقات</h3>
<p>إذا لم تتمكن من حل أسماء النطاقات (على سبيل المثال، لا يمكنك الوصول إلى المواقع باستخدام أسماء النطاقات)، فقد تكون هناك مشكلة في تكوين DNS.</p>
<h4>الحلول المحتملة:</h4>
<ul>
<li>تحقق من اتصالك بالإنترنت. حاول الوصول إلى المواقع باستخدام عناوين IP بدلاً من أسماء النطاقات.</li>
<li>تحقق من تكوين DNS على جهازك. تأكد من أنك تستخدم خوادم DNS صالحة.</li>
<li>جرب استخدام خوادم DNS بديلة، مثل Google Public DNS (8.8.8.8 و 8.8.4.4) أو Cloudflare DNS (1.1.1.1 و 1.0.0.1).</li>
<li>امسح ذاكرة التخزين المؤقت DNS على جهازك. على Windows، استخدم الأمر "ipconfig /flushdns".</li>
<li>تحقق من جدار الحماية أو برامج الأمان الأخرى التي قد تمنع حركة DNS.</li>
</ul>
<h3>2. تأخر في حل أسماء النطاقات</h3>
<p>إذا كان حل أسماء النطاقات يستغرق وقتًا طويلاً، فقد تكون هناك مشكلة في أداء DNS.</p>
<h4>الحلول المحتملة:</h4>
<ul>
<li>جرب استخدام خوادم DNS أسرع، مثل خوادم DNS القريبة منك جغرافيًا.</li>
<li>تحقق من اتصالك بالإنترنت. قد يؤدي اتصال بطيء إلى تأخير في استعلامات DNS.</li>
<li>تحقق من وجود برامج ضارة أو فيروسات قد تؤثر على أداء DNS.</li>
<li>قم بتعطيل ميزات DNS الإضافية (مثل DNSSEC أو DoH) مؤقتًا لمعرفة ما إذا كانت تسبب التأخير.</li>
</ul>
<h3>3. حل أسماء النطاقات إلى عناوين IP خاطئة</h3>
<p>إذا تم حل أسماء النطاقات إلى عناوين IP خاطئة، فقد تكون هناك مشكلة في ذاكرة التخزين المؤقت DNS أو قد تكون ضحية لهجوم تسميم DNS.</p>
<h4>الحلول المحتملة:</h4>
<ul>
<li>امسح ذاكرة التخزين المؤقت DNS على جهازك.</li>
<li>تحقق من ملف المضيفين (hosts) على جهازك للتأكد من عدم وجود إدخالات خاطئة.</li>
<li>قم بفحص جهازك بحثًا عن برامج ضارة أو فيروسات.</li>
<li>جرب استخدام خوادم DNS مختلفة.</li>
<li>إذا كنت تشك في هجوم تسميم DNS، فاستخدم خوادم DNS آمنة تدعم DNSSEC أو DoH/DoT.</li>
</ul>
<h3>أدوات استكشاف أخطاء DNS وإصلاحها</h3>
<p>هناك عدة أدوات يمكن استخدامها لاستكشاف مشاكل DNS وإصلاحها:</p>
<ul>
<li><strong>nslookup/dig:</strong> أدوات سطر الأوامر لإجراء استعلامات DNS وعرض النتائج.</li>
<li><strong>ping:</strong> أداة بسيطة للتحقق من الاتصال بعنوان IP أو اسم نطاق.</li>
<li><strong>traceroute/tracert:</strong> أدوات لتتبع مسار الحزم عبر الشبكة، مما قد يساعد في تحديد مشاكل الاتصال.</li>
<li><strong>Wireshark:</strong> أداة متقدمة لالتقاط وتحليل حركة الشبكة، بما في ذلك حركة DNS.</li>
<li><strong>DNSViz:</strong> أداة عبر الإنترنت لتحليل وتصور سلسلة الثقة DNSSEC.</li>
<li><strong>MXToolbox:</strong> أداة عبر الإنترنت للتحقق من سجلات DNS المختلفة، خاصة تلك المتعلقة بالبريد الإلكتروني.</li>
</ul>
<h2>أفضل ممارسات DNS</h2>
<p>لتحقيق أقصى استفادة من DNS وتجنب المشاكل الشائعة، إليك بعض أفضل الممارسات:</p>
<h3>1. استخدم خوادم DNS متعددة</h3>
<p>لضمان توافر DNS، استخدم خوادم DNS متعددة. هذا يوفر تكرارًا في حالة فشل خادم DNS واحد.</p>
<h3>2. استخدم قيم TTL مناسبة</h3>
<p>اختر قيم TTL مناسبة لسجلات DNS الخاصة بك. قيم TTL المنخفضة تسمح بتغييرات DNS أسرع ولكنها تزيد من حركة DNS. قيم TTL العالية تقلل من حركة DNS ولكنها تؤخر انتشار تغييرات DNS.</p>
<h3>3. نفذ DNSSEC</h3>
<p>نفذ DNSSEC لتوفير مصادقة وسلامة لبيانات DNS. هذا يحمي من هجمات تسميم DNS وغيرها من التهديدات.</p>
<h3>4. استخدم DNS الخاص (DoH/DoT)</h3>
<p>استخدم DNS عبر HTTPS (DoH) أو DNS عبر TLS (DoT) لتشفير استعلامات DNS وحماية خصوصية المستخدم.</p>
<h3>5. قم بتأمين خوادم DNS</h3>
<p>قم بتأمين خوادم DNS الخاصة بك عن طريق تحديث البرامج بانتظام، وتقييد الوصول، وتنفيذ ضوابط أمان قوية.</p>
<h3>6. راقب أداء DNS</h3>
<p>راقب أداء DNS بانتظام للتأكد من أنه يعمل بشكل صحيح وللكشف عن أي مشاكل محتملة.</p>
<h3>7. وثق تكوين DNS</h3>
<p>حافظ على توثيق دقيق لتكوين DNS الخاص بك، بما في ذلك جميع النطاقات والسجلات. هذا سيساعد في استكشاف الأخطاء وإصلاحها وسيكون مفيدًا عند إجراء تغييرات في المستقبل.</p>
<h3>8. خطط لتغييرات DNS</h3>
<p>عند التخطيط لتغييرات DNS (مثل تغيير مضيف الويب)، قلل من قيم TTL قبل التغيير لتسريع انتشار التغييرات، ثم زد من قيم TTL بعد اكتمال التغيير لتحسين الأداء.</p>
<h2>خلاصة</h2>
<p>نظام أسماء النطاقات (DNS) هو نظام أساسي في الإنترنت الحديث، يترجم أسماء النطاقات المألوفة للإنسان إلى عناوين IP الرقمية التي تحتاجها أجهزة الكمبيوتر للاتصال ببعضها البعض. من خلال فهم كيفية عمل DNS، ومكوناته، وأنواع سجلاته، وميزات الأمان مثل DNSSEC و DoH/DoT، يمكنك استخدام هذا النظام بفعالية وتأمينه ضد التهديدات المحتملة.</p>
<p>سواء كنت مستخدمًا عاديًا أو مسؤول شبكة، فإن فهم DNS سيساعدك على استكشاف مشاكل الشبكة وإصلاحها وتحسين أداء الإنترنت وأمانه.</p>
<p>في الدرس القادم، سنتعمق في استكشاف أخطاء الشبكات وإصلاحها، وهو موضوع مهم لأي شخص يعمل مع الشبكات.</p>
</div>
<div class="lesson-navigation">
<a class="prev-lesson" href="dhcp.html">الدرس السابق: بروتوكول DHCP</a>
<a class="next-lesson" href="troubleshooting.html">الدرس التالي: استكشاف الأخطاء وإصلاحها</a>
</div>
</main>
</div>
<!-- الفوتر -->
<footer>
<div class="container footer-content">
<div class="footer-section">
<h3>عالم الشبكات</h3>
<p>الموقع التعليمي الأول المتخصص في تعليم أساسيات الشبكات وتقنياتها المتقدمة بأسلوب علمي سهل ومدعوم بالصور والرسومات التوضيحية.</p>
</div>
<div class="footer-section">
<h3>روابط سريعة</h3>
<ul>
<li><a href="../index.html">الرئيسية</a></li>
<li><a href="../basics.html">الأساسيات</a></li>
<li><a href="../level-one.html">المستوى الأول</a></li>
<li><a href="../level-two.html">المستوى الثاني</a></li>
<li><a href="../tests.html">الاختبارات</a></li>
</ul>
</div>
<div class="footer-section">
<h3>تواصل معنا</h3>
<ul>
<li><i class="fas fa-envelope"></i> البريد الإلكتروني: mohannadm380w108@gmail.com</li>
<li><i class="fas fa-phone"></i> الهاتف: 772505594</li>
<li><i class="fas fa-user"></i> مهند مهدي</li>
</ul>
<div class="social-icons">
<a href="https://www.facebook.com/profile.php?id=100026471569171" target="_blank"><i class="fab fa-facebook-f"></i></a>
<a href="https://wa.me/772505594" target="_blank"><i class="fab fa-whatsapp"></i></a>
</div>
</div>
</div>
<div class="container copyright">
<p>جميع الحقوق محفوظة © 2025 - عالم الشبكات</p>
</div>
</footer>
<script src="../js/main.js"></script>
<script src="../js/script.js"></script>
</body>
</html>
